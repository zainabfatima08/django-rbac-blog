<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Posts</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
</head>
<body class="bg-gray-100 p-10">

<div class="max-w-4xl mx-auto bg-white p-6 rounded shadow">
    <h2 class="text-2xl font-bold mb-4">Blog Posts</h2>

    <a href="{% url 'post_create' %}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 mb-4 inline-block">Create New Post</a>

    <table class="min-w-full border border-gray-300">
        <thead>
            <tr class="bg-gray-200">
                <th class="border px-4 py-2">Title</th>
                <th class="border px-4 py-2">Author</th>
                <th class="border px-4 py-2">Created At</th>
                <th class="border px-4 py-2">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for post in posts %}
            <tr>
                <td class="border px-4 py-2">{{ post.title }}</td>
                <td class="border px-4 py-2">{{ post.author.username }}</td>
                <td class="border px-4 py-2">{{ post.created_at|date:"Y-m-d H:i" }}</td>
                <td class="border px-4 py-2">
                    <!-- Read button - sab ke liye -->
                    <a href="{% url 'post_detail' post.id %}" class="bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">Read</a>

                    {% if request.user == post.author or request.user.is_staff %}
                    <a href="{% url 'post_update' post.id %}" class="bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600">Edit</a>
                    {% endif %}
                    {% if request.user.is_staff %}
                    <a href="{% url 'post_delete' post.id %}" class="bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700">Delete</a>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td class="border px-4 py-2 text-center" colspan="4">No posts available</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

</body>
</html>